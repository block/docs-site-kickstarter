---
import ContentPageLayout from "@/layouts/ContentPageLayout.astro";
import DocsNavbar from "@/components/docs/DocsNavbar.astro";
import { getCollection, render} from 'astro:content';
import MDXComponents from '@/components/mdx/MDXComponents';

/**
 * Magic required function for dynamic routes; determines the slug
 */
export async function getStaticPaths() {
	const docs = await getCollection('docs');

	// Filter for component pages that have a slug in their frontmatter
	const docDocs = docs.filter(doc => doc.data.slug);

	return docDocs.map((doc) => ({
		params: { 
			slug: doc.data.slug || doc.id
		},
		props: doc,
	}));
}

/**
 * Properties used on this page
 */
const doc = Astro.props;
const title = doc.data.title;
const description = doc.data.description;
const { Content, headings, remarkPluginFrontmatter } = await render(doc);

---

<ContentPageLayout title={title} 
  description={description} 
  headings={headings} 
  maxWidth="wide">
  <DocsNavbar slot="navbar" />
  <Content components={MDXComponents} />
</ContentPageLayout>