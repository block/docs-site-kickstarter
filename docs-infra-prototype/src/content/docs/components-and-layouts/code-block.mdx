---
title: Code Block
description: A custom code block component that follows shadcn/ui design principles.
---

# Code Block

While shadcn/ui doesn't provide a code block component directly, we can create a custom one that integrates with shadcn/ui's design system. This guide will show you how to create and use a code block component that matches your documentation's design.

## Creating the Code Block

First, create a new component file at `src/components/ui/code-block.tsx`:

```tsx
import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"
import { CheckIcon, CopyIcon } from "lucide-react"
import { useState } from "react"

interface CodeBlockProps {
  code: string
  language?: string
  showLineNumbers?: boolean
  className?: string
}

export function CodeBlock({
  code,
  language = "plaintext",
  showLineNumbers = false,
  className,
}: CodeBlockProps) {
  const [isCopied, setIsCopied] = useState(false)

  const copyToClipboard = async () => {
    await navigator.clipboard.writeText(code)
    setIsCopied(true)
    setTimeout(() => setIsCopied(false), 2000)
  }

  return (
    <div className={cn("relative rounded-lg", className)}>
      <div className="flex items-center justify-between px-4 py-2 bg-muted rounded-t-lg border">
        <span className="text-sm text-muted-foreground">{language}</span>
        <Button
          variant="ghost"
          size="sm"
          className="text-muted-foreground hover:text-foreground"
          onClick={copyToClipboard}
        >
          {isCopied ? (
            <CheckIcon className="h-4 w-4" />
          ) : (
            <CopyIcon className="h-4 w-4" />
          )}
        </Button>
      </div>
      <pre className={cn(
        "p-4 rounded-b-lg border border-t-0 bg-muted overflow-x-auto",
        showLineNumbers && "pl-12 relative"
      )}>
        {showLineNumbers && (
          <div className="absolute left-0 top-0 bottom-0 w-8 bg-muted border-r flex flex-col items-end pr-2 text-sm text-muted-foreground select-none">
            {code.split('\n').map((_, i) => (
              <div key={i}>{i + 1}</div>
            ))}
          </div>
        )}
        <code className="text-sm">{code}</code>
      </pre>
    </div>
  )
}
```

## Features

The code block component includes:

- Syntax highlighting support (requires additional setup with libraries like Prism or Shiki)
- Copy to clipboard functionality
- Optional line numbers
- Language indicator
- Responsive design
- Theme-aware styling using shadcn/ui's design tokens

## Usage

Here's how to use the code block component in your documentation:

```tsx
import { CodeBlock } from "@/components/ui/code-block"

// Basic usage
<CodeBlock code="console.log('Hello, world!')" language="javascript" />

// With line numbers
<CodeBlock 
  code={`function greet(name: string) {
  return \`Hello, \${name}!\`
}`}
  language="typescript"
  showLineNumbers
/>
```

## Customization

You can customize the appearance of the code block using Tailwind classes or by modifying the component's styles:

```tsx
<CodeBlock
  code="// Your code here"
  language="javascript"
  className="my-4 max-w-2xl"
/>
```

## Adding Syntax Highlighting

To add syntax highlighting, you can integrate libraries like Prism or Shiki. Here's an example using Prism:

1. Install the required packages:

```bash
pnpm add prismjs @types/prismjs
```

2. Update the code block component to use Prism:

```tsx
import Prism from 'prismjs'
import 'prismjs/themes/prism-tomorrow.css'
import 'prismjs/components/prism-typescript'
import 'prismjs/components/prism-jsx'
import 'prismjs/components/prism-tsx'

// In your component:
const highlightedCode = Prism.highlight(
  code,
  Prism.languages[language] || Prism.languages.plaintext,
  language
)
```

## Best Practices

1. **Accessibility**: The component includes proper ARIA labels and keyboard navigation support.
2. **Responsive Design**: Code blocks adapt to different screen sizes.
3. **Theme Support**: Uses shadcn/ui's theme tokens for consistent styling.
4. **Error Handling**: Gracefully handles unsupported languages and invalid code.

## Examples

### Basic Code Block

```tsx
<CodeBlock
  code="const greeting = 'Hello, World!'"
  language="javascript"
/>
```

### With Line Numbers

```tsx
<CodeBlock
  code={`function multiply(a: number, b: number): number {
  return a * b;
}

// Usage
const result = multiply(5, 3);
console.log(result); // 15`}
  language="typescript"
  showLineNumbers
/>
```

### Custom Styling

```tsx
<CodeBlock
  code="// Custom styled code block"
  language="javascript"
  className="border-primary"
/>
```

## API Reference

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `code` | `string` | Required | The code to display |
| `language` | `string` | `"plaintext"` | The programming language |
| `showLineNumbers` | `boolean` | `false` | Whether to show line numbers |
| `className` | `string` | `undefined` | Additional CSS classes |

## Integration with Starlight

When using this component with Starlight, you may need to adjust the styles to match Starlight's design system. Add these custom styles to your `src/styles/global.css`:

```css
/* Custom styles for code blocks in Starlight */
.sl-markdown-content .code-block {
  margin: 1rem 0;
}
```

Remember to import and use the component in your MDX files:

```mdx
import { CodeBlock } from '@/components/ui/code-block'

<CodeBlock
  code="console.log('Hello from Starlight!')"
  language="javascript"
/>
```