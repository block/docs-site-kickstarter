---
import Icon from "../block/Icon.astro";
import { footerBlockOSData } from "./footer-blockos";
import "@/styles/global.css";

interface Props {}

const { } = Astro.props;

const currentYear = new Date().getFullYear();
const copyrightText = footerBlockOSData.copyright || `Â© ${currentYear} ${footerBlockOSData.companyName}. All rights reserved.`;
---

<footer class="bg-background border-t border-border mt-auto py-16 md:py-12 sm:py-8 pb-8 md:pb-6 sm:pb-6">
  <div class="container mx-4 sm:mx-6 md:mx-2 lg:mx-auto" style="max-width: min(100%, 100ch);">
    <div class="flex flex-col lg:flex-row lg:items-start gap-8 lg:gap-0 mb-12 md:mb-8">
      <!-- Block Logo and Name - Left Side -->
      <div class="flex-shrink-0 lg:pl-0">
        {footerBlockOSData.logo && (
          <div class="flex items-center gap-2.5">
            <div class="w-24 h-24">
              <Icon name={footerBlockOSData.logo}/>
            </div>
            <div class="text-xl font-semibold text-foreground">{footerBlockOSData.companyName}</div>
          </div>
        )}
      </div>
      
      <!-- Flex spacer to push navigation to the right -->
      <div class="hidden lg:flex lg:flex-1"></div>
      
      <!-- Navigation Sections - Better responsive layout -->
      {footerBlockOSData.sections.length > 0 && (
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-8 sm:gap-6 lg:flex lg:gap-6 lg:flex-row ml-28 sm:ml-28 lg:ml-0">
          {footerBlockOSData.sections.map((section) => (
            <div class="flex flex-col gap-4 lg:max-w-32 lg:flex-shrink lg:flex-grow-0">
              <h4 class="text-sm font-semibold text-foreground m-0 whitespace-nowrap">{section.title}</h4>
              <ul class="list-none p-0 m-0 flex flex-col gap-3">
                {section.links.map((link) => (
                  <li>
                    <a 
                      href={link.href}
                      {...(link.external && { target: '_blank', rel: 'noopener noreferrer' })}
                      class="text-sm text-muted-foreground no-underline transition-colors duration-200 flex items-center gap-2 hover:text-foreground whitespace-nowrap"
                    >
                      {link.icon && (
                        <Icon name={link.icon} class="w-5 h-5 flex-shrink-0" />
                      )}
                      <span>{link.title}</span>
                    </a>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      )}
    </div>
    
    <!-- Footer Bottom -->
    <div class="mt-8">
      <div class="h-px bg-border mb-8"></div>
      <div class="flex justify-between items-center gap-4 md:flex-col md:text-center md:gap-6">
        <div class="text-sm text-muted-foreground">
          {copyrightText}
        </div>
      </div>
    </div>
  </div>
</footer>