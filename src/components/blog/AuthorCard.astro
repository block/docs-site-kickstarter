---
import  '@/styles/global.css';
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import { Icon } from 'astro-icon/components';

const { author } = Astro.props;
const avatarDir = '/src/assets/blog/avatars/';
const avatarPath = avatarDir + author.data.avatar;
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/blog/avatars/*.{jpeg,jpg,png,gif}') // Must take a String literal otherwise we'd reuse avatarDir here
if (!images[avatarPath]) throw new Error(`"${avatarPath}" does not exist`);

const socialX = author.data['social-x'];
const socialLinkedin = author.data['social-linkedin'];
const socialGithub = author.data['social-github']
---

<div class="flex flex-col sm:flex-row gap-4">
  <div id="authorimage" class="flex-none py-4"><Image src={images[avatarPath]()} alt={author.data.name} width={125} class="rounded-full border"/></div>
  <div id="authordata" class="flex-1 flex items-center">
    <div class="w-full pl-2">
      <h3 class="pt-2 pb-0 my-0">{ author.data.name }</h4>
      <h6 class="py-1 pt-0 mt-0 my-0">{ author.data.title }</h6>
      <div class="gap-4 flex flex-row items-center pt-2 py-0 my-0 h-10">
        {socialX && (
          <div><a href={'https://x.com/' + socialX} target="x"><Icon name="x-twitter" class="w-5 h-5" /></a></div>
        )}
        {socialGithub && (
          <div><a href={'https://github.com/' + socialGithub} target="github"><Icon name="octicon-github" class="w-5 h-5" /></a></div>
        )}
        {socialLinkedin && (
          <div><a href={'https://linkedin.com/in/' + socialLinkedin} target="linkedin"><Icon name="linkedin" class="w-5 h-5" /></a></div>
        )}
      </div>
    </div>
  </div>
</div>